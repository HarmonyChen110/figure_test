<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nature Style Interactive Charts</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
</head>

<body>
    <!-- é¡¶éƒ¨æ§åˆ¶æ  -->
    <header class="control-bar">
        <div class="logo">
            <span class="logo-icon">ğŸ“Š</span>
            <span class="logo-text">Nature Charts Studio</span>
        </div>
        <div class="global-controls">
            <button id="toggleLabels" class="ctrl-btn" title="åˆ‡æ¢æ ‡ç­¾æ˜¾ç¤º">
                <span class="icon">ğŸ·ï¸</span> æ ‡ç­¾
            </button>
            <button id="editMode" class="ctrl-btn" title="ç¼–è¾‘æ¨¡å¼">
                <span class="icon">âœï¸</span> ç¼–è¾‘
            </button>
            <div class="color-scheme-selector">
                <label>é…è‰²æ–¹æ¡ˆ:</label>
                <select id="colorScheme">
                    <option value="npg">NPG Standard</option>
                    <option value="nature">Nature Classic</option>
                    <option value="science">Science Blue</option>
                    <option value="custom">è‡ªå®šä¹‰</option>
                </select>
            </div>
            <button id="importCSV" class="ctrl-btn" title="å¯¼å…¥CSV">
                <span class="icon">ğŸ“</span> å¯¼å…¥CSV
            </button>
            <button id="loadRealData" class="ctrl-btn" title="æå–çœŸå®æ•°æ®">
                <span class="icon">ğŸ”</span> æå–çœŸå®æ•°æ®
            </button>
            <input type="file" id="csvFileInput" accept=".csv" style="display:none">
        </div>
    </header>

    <!-- ä¸»å†…å®¹åŒº -->
    <main class="main-content">
        <!-- å›¾è¡¨é€‰æ‹©æ ‡ç­¾é¡µ -->
        <nav class="chart-tabs">
            <button class="tab-btn active" data-chart="table2">Table 2: AIæ€§èƒ½çƒ­åŠ›è¡¨</button>
            <button class="tab-btn" data-chart="figure3">Figure 3: é›¨äº‘å›¾</button>
            <button class="tab-btn" data-chart="figure4">Figure 4: AIæµç¨‹å›¾</button>
        </nav>

        <!-- å›¾è¡¨å®¹å™¨ -->
        <div class="chart-container">
            <!-- Table 2 å®¹å™¨ -->
            <div id="table2-container" class="chart-panel active">
                <div class="chart-header">
                    <h2>Table 2: Spectral Analysis AI Performance Overview</h2>
                    <div class="chart-actions">
                        <button class="action-btn zoom-btn" data-target="table2" title="å…¨å±æŸ¥çœ‹">ğŸ”</button>
                        <button class="action-btn export-png" data-target="table2" title="å¯¼å‡ºPNG">ğŸ“·</button>
                        <button class="action-btn export-svg" data-target="table2" title="å¯¼å‡ºSVG">ğŸ“</button>
                    </div>
                </div>
                <div id="table2-chart" class="chart-area"></div>
            </div>

            <!-- Figure 3 å®¹å™¨ -->
            <div id="figure3-container" class="chart-panel">
                <div class="chart-header">
                    <h2>Figure 3: Image Recognition Performance Raincloud Plot</h2>
                    <div class="chart-actions">
                        <button class="action-btn zoom-btn" data-target="figure3" title="å…¨å±æŸ¥çœ‹">ğŸ”</button>
                        <button class="action-btn export-png" data-target="figure3" title="å¯¼å‡ºPNG">ğŸ“·</button>
                        <button class="action-btn export-svg" data-target="figure3" title="å¯¼å‡ºSVG">ğŸ“</button>
                    </div>
                </div>
                <div id="figure3-chart" class="chart-area"></div>
            </div>

            <!-- Figure 4 å®¹å™¨ -->
            <div id="figure4-container" class="chart-panel">
                <div class="chart-header">
                    <h2>Figure 4: AI Strategy for Complex Environmental Scenarios</h2>
                    <div class="chart-actions">
                        <button class="action-btn zoom-btn" data-target="figure4" title="å…¨å±æŸ¥çœ‹">ğŸ”</button>
                        <button class="action-btn export-png" data-target="figure4" title="å¯¼å‡ºPNG">ğŸ“·</button>
                        <button class="action-btn export-svg" data-target="figure4" title="å¯¼å‡ºSVG">ğŸ“</button>
                    </div>
                </div>
                <div id="figure4-chart" class="chart-area"></div>
            </div>
        </div>
    </main>

    <!-- å…¨å±æŸ¥çœ‹æ¨¡æ€æ¡† -->
    <div id="fullscreenModal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div class="modal-header">
                <h3 id="modal-title"></h3>
                <div class="modal-controls">
                    <button id="modal-zoom-in" class="modal-btn">â• æ”¾å¤§</button>
                    <button id="modal-zoom-out" class="modal-btn">â– ç¼©å°</button>
                    <button id="modal-reset" class="modal-btn">ğŸ”„ é‡ç½®</button>
                </div>
            </div>
            <div id="modal-chart-container" class="modal-chart"></div>
        </div>
    </div>

    <!-- ç¼–è¾‘é¢æ¿ -->
    <div id="editPanel" class="edit-panel hidden">
        <div class="edit-panel-header">
            <h3>ç¼–è¾‘é¢æ¿</h3>
            <button id="closeEditPanel" class="close-btn">&times;</button>
        </div>
        <div class="edit-panel-content">
            <div class="edit-section">
                <h4>é€‰ä¸­å…ƒç´ </h4>
                <p id="selectedElement">æœªé€‰æ‹©ä»»ä½•å…ƒç´ </p>
            </div>
            <div class="edit-section">
                <h4>æ–‡æœ¬å†…å®¹</h4>
                <input type="text" id="editText" placeholder="ä¿®æ”¹æ–‡æœ¬å†…å®¹">
                <button id="applyTextChange" class="apply-btn">åº”ç”¨</button>
            </div>
            <div class="edit-section">
                <h4>é¢œè‰²</h4>
                <input type="color" id="editColor" value="#E64B35">
                <button id="applyColorChange" class="apply-btn">åº”ç”¨</button>
            </div>
            <div class="edit-section">
                <h4>æ“ä½œ</h4>
                <button id="deleteElement" class="danger-btn">åˆ é™¤å…ƒç´ </button>
                <button id="duplicateElement" class="action-btn">å¤åˆ¶å…ƒç´ </button>
            </div>
        </div>
    </div>

    <!-- è‡ªå®šä¹‰é…è‰²é¢æ¿ -->
    <div id="customColorPanel" class="color-panel hidden">
        <div class="color-panel-header">
            <h3>è‡ªå®šä¹‰é…è‰²</h3>
            <button id="closeColorPanel" class="close-btn">&times;</button>
        </div>
        <div class="color-panel-content">
            <div class="color-item">
                <label>ä¸»è‰² (çº¢è‰²ç³»):</label>
                <input type="color" id="customRed" value="#E64B35">
            </div>
            <div class="color-item">
                <label>è¾…è‰² (è“è‰²ç³»):</label>
                <input type="color" id="customBlue" value="#4DBBD5">
            </div>
            <div class="color-item">
                <label>å¼ºè°ƒè‰² (ç»¿è‰²ç³»):</label>
                <input type="color" id="customGreen" value="#00A087">
            </div>
            <div class="color-item">
                <label>èƒŒæ™¯è‰² (æ·±è“ç³»):</label>
                <input type="color" id="customDarkBlue" value="#3C5488">
            </div>
            <button id="applyCustomColors" class="apply-btn full-width">åº”ç”¨é…è‰²</button>
        </div>
    </div>

    <!-- åŠ è½½è„šæœ¬ -->
    <script src="colorSchemes.js"></script>
    <script src="table2.js"></script>
    <script src="figure3.js"></script>
    <script src="figure4.js"></script>
    <script src="data_loader.js"></script>
    <script src="app.js"></script>
</body>

</html>